(()=>{"use strict";var e={d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{INITIAL:()=>n,INITIAL_STATE:()=>g,QUADLAYERS_AICP_STORE_NAME:()=>z,STORE_NAME:()=>o,actions:()=>i,fetchRestApiSettings:()=>m,reducer:()=>S,resolvers:()=>d,selectors:()=>s,useAdminMenuChatbotsSettings:()=>D,useAdminMenuModulesSettings:()=>b,useAdminMenuServicesSettings:()=>A,useAdminMenuStatsSettings:()=>R,useModuleAllowedPostTypes:()=>I});var s={};e.r(s),e.d(s,{getModifiedSettingsChatbots:()=>M,getModifiedSettingsModules:()=>c,getModifiedSettingsServices:()=>u,getModifiedSettingsStats:()=>h,getSavedSettingsChatbots:()=>l,getSavedSettingsModules:()=>r,getSavedSettingsServices:()=>v,getSavedSettingsStats:()=>p});var i={};e.r(i),e.d(i,{deleteModifiedSettingsStats:()=>j,deleteSettings:()=>Y,saveModifiedSettingsChatbots:()=>k,saveModifiedSettingsModules:()=>L,saveModifiedSettingsServices:()=>H,saveModifiedSettingsStats:()=>G,saveSettings:()=>B,setSavedSettingsChatbots:()=>V,setSavedSettingsModules:()=>N,setSavedSettingsServices:()=>F,setSavedSettingsStats:()=>U,updateModifiedSettingsChatbots:()=>P,updateModifiedSettingsModules:()=>C,updateModifiedSettingsServices:()=>w,updateModifiedSettingsStats:()=>O});var d={};e.r(d),e.d(d,{getSavedSettingsChatbots:()=>Q,getSavedSettingsModules:()=>W,getSavedSettingsServices:()=>q,getSavedSettingsStats:()=>$});var S={};e.r(S),e.d(S,{default:()=>x});const a=window.wp.data,o="aicp/menu/store",n={modules:{},services:{},stats:{},chatbot:{}},g={savedSettings:n,modifiedSettings:n},r=e=>e.savedSettings.modules,c=e=>e.modifiedSettings.modules,v=e=>e.savedSettings.services,u=e=>e.modifiedSettings.services,l=e=>e.savedSettings.chatbots,M=e=>e.modifiedSettings.chatbots,p=e=>e.savedSettings.stats,h=e=>e.modifiedSettings.stats,f=window.wp.i18n,T=window.wp.notices,E=window.aicp.helpers,_=window.wp.element,{QUADLAYERS_AICP_API_ADMIN_MENU_REST_ROUTES:y}=aicpApiAdminMenu,m=({method:e,data:t,route:s}={})=>(0,E.apiFetch)({path:y[s],method:e,data:t});function b(){const{updateModifiedSettingsModules:e,saveModifiedSettingsModules:t}=(0,a.useDispatch)(o),{savedSettingsModules:s,modifiedSettingsModules:i,isResolvingSettingsModules:d,hasResolvedSettingsModules:S}=(0,a.useSelect)((s=>{const{getSavedSettingsModules:i,getModifiedSettingsModules:d,isResolving:S,hasFinishedResolution:a}=s(o);return{updateModifiedSettingsModules:e,saveModifiedSettingsModules:t,savedSettingsModules:i(),modifiedSettingsModules:d(),isResolvingSettingsModules:S("getSavedSettingsModules"),hasResolvedSettingsModules:a("getSavedSettingsModules")}}),[]);return{savedSettingsModules:s,modifiedSettingsModules:i,saveModifiedSettingsModules:t,updateModifiedSettingsModules:e,isResolvingSettingsModules:d,hasResolvedSettingsModules:S}}function R(){const{savedSettingsStats:e,modifiedSettingsStats:t,isResolvingSettingsStats:s,hasResolvedSettingsStats:i}=(0,a.useSelect)((e=>{const{getSavedSettingsStats:t,getModifiedSettingsStats:s,isResolving:i,hasFinishedResolution:d}=e(o);return{savedSettingsStats:t(),modifiedSettingsStats:s(),isResolvingSettingsStats:i("getSavedSettingsStats"),hasResolvedSettingsStats:d("getSavedSettingsStats")}}),[]),{updateModifiedSettingsStats:d,saveModifiedSettingsStats:S,deleteModifiedSettingsStats:n}=(0,a.useDispatch)(o);return{savedSettingsStats:e,modifiedSettingsStats:t,isResolvingSettingsStats:s,hasResolvedSettingsStats:i,saveModifiedSettingsStats:S,updateModifiedSettingsStats:d,deleteModifiedSettingsStats:n}}function A(){const{updateModifiedSettingsServices:e,saveModifiedSettingsServices:t}=(0,a.useDispatch)(o),{savedSettingsServices:s,modifiedSettingsServices:i,isResolvingSettingsServices:d,hasResolvedSettingsServices:S}=(0,a.useSelect)((s=>{const{getSavedSettingsServices:i,getModifiedSettingsServices:d,isResolving:S,hasFinishedResolution:a}=s(o);return{updateModifiedSettingsServices:e,saveModifiedSettingsServices:t,savedSettingsServices:i(),modifiedSettingsServices:d(),isResolvingSettingsServices:S("getSavedSettingsServices"),hasResolvedSettingsServices:a("getSavedSettingsServices")}}),[]);return{savedSettingsServices:s,modifiedSettingsServices:i,saveModifiedSettingsServices:t,updateModifiedSettingsServices:e,isResolvingSettingsServices:d,hasResolvedSettingsServices:S}}function D(){const{updateModifiedSettingsChatbots:e,saveModifiedSettingsChatbots:t}=(0,a.useDispatch)(o),{savedSettingsChatbots:s,modifiedSettingsChatbots:i,isResolvingSettingsChatbots:d,hasResolvedSettingsChatbots:S}=(0,a.useSelect)((s=>{const{getSavedSettingsChatbots:i,getModifiedSettingsChatbots:d,isResolving:S,hasFinishedResolution:a}=s(o);return{updateModifiedSettingsChatbots:e,saveModifiedSettingsChatbots:t,savedSettingsChatbots:i(),modifiedSettingsChatbots:d(),isResolvingSettingsChatbots:S("getSavedSettingsChatbots"),hasResolvedSettingsChatbots:a("getSavedSettingsChatbots")}}),[]);return{savedSettingsChatbots:s,modifiedSettingsChatbots:i,saveModifiedSettingsChatbots:t,updateModifiedSettingsChatbots:e,isResolvingSettingsChatbots:d,hasResolvedSettingsChatbots:S}}function I(e){if(!e)return E.OPTIONS_POST_TYPES;const t=`${e}_enable`,s=`${e}_post_types`,{savedSettingsModules:i}=b();return(0,_.useMemo)((()=>i?1!==i?.[t]?[]:E.OPTIONS_POST_TYPES.filter((e=>i[s].includes(e.value))):[]),[i,t,s])}const C=e=>({type:"UPDATE_MODIFIED_MODULES",payload:e}),O=e=>({type:"UPDATE_MODIFIED_STATS",payload:e}),w=e=>({type:"UPDATE_MODIFIED_SERVICES",payload:e}),P=e=>({type:"UPDATE_MODIFIED_CHATBOTS",payload:e}),N=e=>({type:"SET_SAVED_SETTINGS_MODULES",payload:e}),U=e=>({type:"SET_SAVED_SETTINGS_STATS",payload:e}),F=e=>({type:"SET_SAVED_SETTINGS_SERVICES",payload:e}),V=e=>({type:"SET_SAVED_SETTINGS_CHATBOTS",payload:e}),L=e=>B(e,"modules"),G=e=>B(e,"stats"),H=e=>B(e,"services"),k=e=>B(e,"chatbots"),j=e=>Y("stats"),B=(e,t)=>async({registry:s,dispatch:i})=>{if(!t)throw new Error("Route is required.");const d=await m({method:"POST",data:e,route:t});return d?.code?(s.dispatch(T.store).createSuccessNotice((0,f.sprintf)("%s: %s",d.code,d.message),{type:"snackbar"}),!1):(i[`setSavedSettings${t.charAt(0).toUpperCase()+t.slice(1)}`](e),s.dispatch(T.store).createSuccessNotice((0,f.__)("Settings saved.","ai-copilot"),{type:"snackbar"}),!0)},Y=e=>async({registry:t,dispatch:s})=>{if(!e)throw new Error("Route is required.");const i=await m({route:e,method:"DELETE"});return i?.code?(t.dispatch(T.store).createSuccessNotice((0,f.sprintf)("%s: %s",i.code,i.message),{type:"snackbar"}),!1):(s[`setSavedSettings${e.charAt(0).toUpperCase()+e.slice(1)}`]({}),t.dispatch(T.store).createSuccessNotice((0,f.__)("Filters settings have been reset.","ai-copilot"),{type:"snackbar"}),!0)},$=async()=>{try{const e=await m({route:"stats"});return U(e)}catch(e){console.error(e)}},W=async()=>{try{const e=await m({route:"modules"});return N(e)}catch(e){console.error(e)}},q=async()=>{try{const e=await m({route:"services"});return F(e)}catch(e){console.error(e)}},Q=async()=>{try{const e=await m({route:"chatbots"});return V(e)}catch(e){console.error(e)}};function x(e=g,t){switch(t.type){case"UPDATE_MODIFIED_MODULES":return(0,E.deepMerge)(e,{modifiedSettings:{modules:t.payload}});case"UPDATE_MODIFIED_STATS":return(0,E.deepMerge)(e,{modifiedSettings:{stats:t.payload}});case"UPDATE_MODIFIED_SERVICES":return(0,E.deepMerge)(e,{modifiedSettings:{services:t.payload}});case"UPDATE_MODIFIED_CHATBOTS":return(0,E.deepMerge)(e,{modifiedSettings:{chatbots:t.payload}});case"SET_SAVED_SETTINGS_MODULES":return(0,E.deepMerge)(e,{savedSettings:{modules:t.payload},modifiedSettings:{modules:t.payload}});case"SET_SAVED_SETTINGS_STATS":return(0,E.deepMerge)(e,{savedSettings:{stats:t.payload},modifiedSettings:{stats:t.payload}});case"SET_SAVED_SETTINGS_SERVICES":return(0,E.deepMerge)(e,{savedSettings:{services:t.payload},modifiedSettings:{services:t.payload}});case"SET_SAVED_SETTINGS_CHATBOTS":return(0,E.deepMerge)(e,{savedSettings:{chatbots:t.payload},modifiedSettings:{chatbots:t.payload}});default:return e}}const K=(0,a.createReduxStore)(o,{reducer:x,actions:i,selectors:s,resolvers:d});(0,a.register)((0,E.isVersionLessThan)(E.WP_VERSION,E.FIRST_WP_VERSION_WITH_THUNK_SUPPORT)?(0,E.applyThunkMiddleware)(K):K);const z=o;(window.aicp=window.aicp||{})["api-admin-menu"]=t})();